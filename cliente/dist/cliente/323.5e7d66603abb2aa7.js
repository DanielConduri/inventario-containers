"use strict";(self.webpackChunkcliente=self.webpackChunkcliente||[]).push([[323],{7590:(y,f,a)=>{a.r(f),a.d(f,{PrestamosRoutingModule:()=>Jt});var v=a(6264),T=a(3997),u=a(7579),_=a(2722),t=a(4650),x=a(8145),b=a(7114),p=a(6895),m=a(5226),d=a.n(m),Z=a(8158),C=a(4359),A=a(614),M=a(3194),I=a(7888);function q(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",8)(1,"button",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getReporte("Solicitud","solicitudPrestamo",!0))}),t._uU(2," Reporte "),t.qZA()()}}function O(o,r){if(1&o&&(t.TgZ(0,"td")(1,"div",19)(2,"div",20),t._uU(3),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.str_estado_prestamo_nombre," ")}}function E(o,r){if(1&o&&(t.TgZ(0,"td")(1,"div",19)(2,"div",21),t._uU(3),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.str_estado_prestamo_nombre," ")}}function N(o,r){if(1&o&&(t.TgZ(0,"td")(1,"div",19)(2,"div",22),t._uU(3),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.str_estado_prestamo_nombre," ")}}function U(o,r){if(1&o&&(t.TgZ(0,"td")(1,"div",19)(2,"div",23),t._uU(3),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.str_estado_prestamo_nombre," ")}}function w(o,r){if(1&o&&(t.TgZ(0,"td")(1,"div",19)(2,"div",24),t._uU(3),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.str_estado_prestamo_nombre," ")}}function F(o,r){if(1&o&&(t.TgZ(0,"td")(1,"div",19)(2,"div",25),t._uU(3),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.str_estado_prestamo_nombre," ")}}function J(o,r){if(1&o&&(t.TgZ(0,"td")(1,"div",19)(2,"div",26),t._uU(3),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.str_estado_prestamo_nombre," ")}}function D(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.interaccionCustodio(i.int_prestamo_id,"Informacion del Prestamo","interacionCustodio",!1,i.int_estados_prestamo_id,i.int_prestamo_custodio_id,!1))}),t.TgZ(1,"i",17),t._uU(2," create "),t.qZA()()}}function B(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.interaccionCustodio(i.int_prestamo_id,"Informacion del Prestamo","interacionCustodio",!1,i.int_estados_prestamo_id,i.int_prestamo_custodio_id,!0))}),t.TgZ(1,"i",17),t._uU(2," check "),t.qZA()()}}function k(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.interaccionCustodio(i.int_prestamo_id,"Informacion del Prestamo","interacionCustodio",!1,i.int_estados_prestamo_id,i.int_prestamo_custodio_id,!0))}),t.TgZ(1,"i",17),t._uU(2," check "),t.qZA()()}}function S(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.getpdf(i.int_prestamo_id,"Solicitud","solicitudPrestamo",i.int_prestamo_persona_id,i.str_estado_prestamo_nombre,0,i.int_estados_prestamo_id,i.int_prestamo_custodio_id))}),t.TgZ(1,"i",17),t._uU(2," border_color "),t.qZA()()}}function $(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.getFirma(i.int_prestamo_id,"Solicitud","solicitudPrestamo",i.str_estado_prestamo_nombre,i.int_prestamo_persona_id,i.int_prestamo_custodio_id,1,i.int_estados_prestamo_id,i.int_horario_id))}),t.TgZ(1,"i",17),t._uU(2," border_color "),t.qZA()()}}function R(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.interaccionCustodio(i.int_prestamo_id,"Informacion del Prestamo","interacionCustodio",!1,i.int_estados_prestamo_id,i.int_prestamo_custodio_id,!1))}),t.TgZ(1,"i",17),t._uU(2," comment "),t.qZA()()}}function Y(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.interaccionCustodio(i.int_prestamo_id,"Informacion del Prestamo","interacionCustodio",!1,i.int_estados_prestamo_id,i.int_prestamo_custodio_id,!1))}),t.TgZ(1,"i",17),t._uU(2," comment "),t.qZA()()}}function Q(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.YNc(9,O,4,1,"td",15),t.YNc(10,E,4,1,"td",15),t.YNc(11,N,4,1,"td",15),t.YNc(12,U,4,1,"td",15),t.YNc(13,w,4,1,"td",15),t.YNc(14,F,4,1,"td",15),t.YNc(15,J,4,1,"td",15),t.TgZ(16,"td")(17,"button",16),t.NdJ("click",function(){const n=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.interaccionCustodio(n.int_prestamo_id,"Informacion del Prestamo","interacionCustodio",!0,n.int_estados_prestamo_id,n.int_prestamo_custodio_id,!1))}),t.TgZ(18,"i",17),t._uU(19," info_outline "),t.qZA()(),t.YNc(20,D,3,0,"button",18),t.YNc(21,B,3,0,"button",18),t.YNc(22,k,3,0,"button",18),t.YNc(23,S,3,0,"button",18),t.YNc(24,$,3,0,"button",18),t.YNc(25,R,3,0,"button",18),t.YNc(26,Y,3,0,"button",18),t.qZA()()}if(2&o){const e=r.$implicit,s=r.index,i=t.oxw(2);t.xp6(2),t.hij(" ",s+1,""),t.xp6(2),t.hij(" ",e.str_prestamo_codigo," "),t.xp6(2),t.hij("",e.dt_fecha_prestamo.substring(0,10)," "),t.xp6(2),t.Oqu(e.str_prestamo_persona_nombre),t.xp6(1),t.Q6J("ngIf","ENVIADO"===e.str_estado_prestamo_nombre),t.xp6(1),t.Q6J("ngIf","ACEPTADO"===e.str_estado_prestamo_nombre),t.xp6(1),t.Q6J("ngIf","RECHAZADO"===e.str_estado_prestamo_nombre),t.xp6(1),t.Q6J("ngIf","FINALIZADO"===e.str_estado_prestamo_nombre),t.xp6(1),t.Q6J("ngIf","PENDIENTE"===e.str_estado_prestamo_nombre),t.xp6(1),t.Q6J("ngIf","EN USO"===e.str_estado_prestamo_nombre),t.xp6(1),t.Q6J("ngIf","REVISION"===e.str_estado_prestamo_nombre),t.xp6(5),t.Q6J("ngIf","ENVIADO"===e.str_estado_prestamo_nombre&&e.int_prestamo_custodio_id===i.cedulaLogin),t.xp6(1),t.Q6J("ngIf","ACEPTADO"===e.str_estado_prestamo_nombre&&e.int_prestamo_custodio_id===i.cedulaLogin),t.xp6(1),t.Q6J("ngIf","EN USO"===e.str_estado_prestamo_nombre&&e.int_prestamo_custodio_id===i.cedulaLogin),t.xp6(1),t.Q6J("ngIf",null===e.str_documento_base64&&"PENDIENTE"===e.str_estado_prestamo_nombre),t.xp6(1),t.Q6J("ngIf",null!==e.str_documento_base64),t.xp6(1),t.Q6J("ngIf","REVISION"===e.str_estado_prestamo_nombre&&e.int_prestamo_custodio_id===i.cedulaLogin&&null==e.bl_prestamo_observacion),t.xp6(1),t.Q6J("ngIf","REVISION"===e.str_estado_prestamo_nombre&&e.int_prestamo_persona_id==i.cedulaLogin)}}function H(o,r){if(1&o&&(t.TgZ(0,"div",10)(1,"table",11)(2,"thead")(3,"tr",12)(4,"th")(5,"div",13),t._uU(6," # "),t.qZA()(),t.TgZ(7,"th")(8,"div",13),t._uU(9,"Prestamo"),t.qZA()(),t.TgZ(10,"th")(11,"div",13),t._uU(12,"Fecha Prestamo"),t.qZA()(),t.TgZ(13,"th")(14,"div",13),t._uU(15,"Cliente"),t.qZA()(),t.TgZ(16,"th")(17,"div",13),t._uU(18,"Estado"),t.qZA()(),t.TgZ(19,"th")(20,"div",13),t._uU(21,"Acciones"),t.qZA()()()(),t.TgZ(22,"tbody"),t.YNc(23,Q,27,18,"tr",14),t.qZA()()()),2&o){const e=t.oxw();t.xp6(23),t.Q6J("ngForOf",e.srvPrestamos.datosPrestamo)}}function L(o,r){1&o&&(t.TgZ(0,"div",27)(1,"div",28),t.O4$(),t.TgZ(2,"svg",29),t._UZ(3,"path",30),t.qZA(),t.kcU(),t.TgZ(4,"h5",31),t._uU(5,"Resultado sin datos"),t.qZA(),t.TgZ(6,"h6",32),t._uU(7,"No se encontraron elementos para esta lista."),t.qZA()()())}let j=(()=>{class o{constructor(e,s,i,n){this.srvPrestamos=e,this.srvPaginacion=s,this.srvModal=i,this.srvPersona=n,this.destroy$=new u.x,this.isLoading=!1,this.isData=!1,this.mapFiltersToRequest={},this.elementPagina={dataLength:0,metaData:0,currentPage:0},this.currentPage=1,this.options=["codigo","persona"],this.searchResult=null,this.data="",this.parameter="",this.elementForm={form:"",title:"",special:!0}}ngOnInit(){this.reporte=!1,this.srvPrestamos.typeview=!1,this.srvPrestamos.base64=!1,this.cedulaLogin=this.srvPersona.dataMe.str_per_cedula.length<9?"0"+this.srvPersona.dataMe.str_per_cedula:this.srvPersona.dataMe.str_per_cedula,this.pasarPagina(1)}getPrestamos(){d().fire({title:"Cargando...",didOpen:()=>{d().showLoading()}}),this.srvPrestamos.getPrestamosConEstado(this.mapFiltersToRequest).pipe((0,_.R)(this.destroy$)).subscribe({next:e=>{0===e.body.length?(this.isData=!1,this.isLoading=!1):(this.isLoading=e.status,this.isData=e.status),console.log("lo que viene ---\x3e",e.body),this.srvPrestamos.datosPrestamo=e.body,this.metadata=e.total,this.dataPagina(),d().close(),console.log("data",e.body)},error(e){console.log("Error: ",e)}})}dataPagina(){this.elementPagina.dataLength=this.srvPrestamos.datosPrestamo?this.srvPrestamos.datosPrestamo.length:0,this.elementPagina.metaData=this.metadata,this.elementPagina.currentPage=this.mapFiltersToRequest.page,this.srvPaginacion.setPagination(this.elementPagina)}pasarPagina(e){this.mapFiltersToRequest={size:10,page:e,parameter:"",data:0},this.getPrestamos()}handleSearch(e){this.searchResult=e,""===this.searchResult.data||null==this.searchResult.data?(this.parameter="",this.data="",this.reporte=!1,this.pasarPagina(1)):(this.parameter="persona"===this.searchResult.parameter?"str_prestamo_"+this.searchResult.parameter+"_nombre":"str_prestamo_"+this.searchResult.parameter,this.data=this.searchResult.data,this.mapFiltersToRequest={size:10,page:1,parameter:this.parameter,data:this.searchResult.data},this.reporte=!0,this.getPrestamos())}interaccionCustodio(e,s,i,n,c,l,h){this.srvPrestamos.linkOneDrive="",this.srvPrestamos.cedulaCustodio=l,this.srvPrestamos.finalizado=h,this.srvPrestamos.especial=n,this.srvPrestamos.idEstados=c,this.srvPrestamos.idPrestamo=e,this.elementForm.title=s,this.elementForm.form=i,this.srvModal.setForm(this.elementForm),this.srvModal.openModal()}agregarFirma(e,s,i,n){this.srvPrestamos.linkOneDrive="",this.srvPrestamos.idPrestamo=e,this.srvPrestamos.idEstados=n,this.elementForm.title=s,this.elementForm.form=i,this.srvModal.setForm(this.elementForm),this.srvModal.openModal()}getReporte(e,s,i){this.srvPrestamos.linkOneDrive="",this.srvPrestamos.reporte=i,this.elementForm.title=e,this.elementForm.form=s,this.srvModal.setForm(this.elementForm),this.srvModal.openModal()}getpdf(e,s,i,n,c,l,h,P){this.srvPrestamos.linkOneDrive="",this.srvPrestamos.cedulaCustodio=P,this.srvPrestamos.reporte=!1,console.log("cedula custodio",P),this.srvPrestamos.cedulaPrestamo=n,this.srvPrestamos.estadoPrestamo=c,this.srvPrestamos.proceso=l,this.srvPrestamos.idEstados=h,this.srvPrestamos.base64=!1,this.srvPrestamos.pdf=e,this.elementForm.title=s,this.elementForm.form=i,this.srvModal.setForm(this.elementForm),this.srvModal.openModal()}getFirma(e,s,i,n,c,l,h,P,Dt){this.srvPrestamos.linkOneDrive="",this.srvPrestamos.cedulaCustodio=l,this.srvPrestamos.reporte=!1,this.srvPrestamos.horarioId=Dt,console.log("cedula custodio",l),this.srvPrestamos.cedulaPrestamo=c,this.srvPrestamos.estadoPrestamo=n,this.srvPrestamos.idEstados=P,this.srvPrestamos.proceso=h,this.srvPrestamos.base64=!0,this.srvPrestamos.pdf=e,this.elementForm.title=s,this.elementForm.form=i,this.srvModal.setForm(this.elementForm),this.srvModal.openModal()}getOneDrive(e,s,i,n){this.srvPrestamos.linkOneDrive=n,this.srvPrestamos.pdf=e,this.elementForm.title=s,this.elementForm.form=i,this.srvModal.setForm(this.elementForm),this.srvModal.openModal()}obtenerDecano(e){this.srvPrestamos.getDecano(e).pipe((0,_.R)(this.destroy$)).subscribe({next:s=>{console.log("data decano->",s),this.srvPrestamos.cedulaDecano=s.body.listado[0].strCedulaDecano},error:s=>{console.log(s)}})}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.W),t.Y36(Z.H),t.Y36(C.Z),t.Y36(A.F))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mostrar-prestamo"]],decls:8,vars:4,consts:[[2,"display","grid","width","100%","grid-template-columns","2fr 0.5fr"],[3,"options","search"],["style","display: flex; justify-content: center;",4,"ngIf"],[1,"tabla-cuerpo"],["class","tableBo",4,"ngIf"],["class","containerNoData",4,"ngIf"],[1,"pagi"],[3,"nextPage"],[2,"display","flex","justify-content","center"],[1,"btn-primary-add",3,"click"],[1,"tableBo"],[1,"table","table-striped","tabla-estilos"],[1,"encabezado"],[1,"d-flex"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"material-icons"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"estado"],[1,"evolucion"],[1,"activo"],[1,"inactivo"],[1,"finalizado"],[1,"proceso"],[1,"enuso"],[1,"revision"],[1,"containerNoData"],["_ngcontent-lne-c77","",1,"mx-auto",2,"margin-top","64px","margin-bottom","64px"],["_ngcontent-lne-c77","","xmlns","http://www.w3.org/2000/svg","height","32","width","32","viewBox","0 0 48 48"],["_ngcontent-lne-c77","","d","M38.7 40.85 26.65 28.8q-1.5 1.3-3.5 2.025-2 .725-4.25.725-5.4 0-9.15-3.75T6 18.75q0-5.3 3.75-9.05 3.75-3.75 9.1-3.75 5.3 0 9.025 3.75 3.725 3.75 3.725 9.05 0 2.15-.7 4.15-.7 2-2.1 3.75L40.95 38.7q.45.4.45 1.025 0 .625-.5 1.125-.45.45-1.1.45-.65 0-1.1-.45Zm-19.85-12.3q4.05 0 6.9-2.875Q28.6 22.8 28.6 18.75t-2.85-6.925Q22.9 8.95 18.85 8.95q-4.1 0-6.975 2.875T9 18.75q0 4.05 2.875 6.925t6.975 2.875Z"],["_ngcontent-lne-c77","",1,"mt-2"],["_ngcontent-lne-c77",""]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"app-filter",1),t.NdJ("search",function(n){return s.handleSearch(n)}),t.qZA(),t.YNc(2,q,3,0,"div",2),t.qZA(),t.TgZ(3,"div",3),t.YNc(4,H,24,1,"div",4),t.YNc(5,L,8,0,"div",5),t.TgZ(6,"div",6)(7,"app-pagination",7),t.NdJ("nextPage",function(n){return s.pasarPagina(n)}),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("options",s.options),t.xp6(1),t.Q6J("ngIf",s.reporte),t.xp6(2),t.Q6J("ngIf",s.isLoading&&s.isData),t.xp6(1),t.Q6J("ngIf",!s.isLoading&&!s.isData))},dependencies:[p.sg,p.O5,M.Q,I.z]}),o})();var g=a(4006),V=a(105),G=a(2573),z=a(5131),K=a(4031);function W(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"label",19),t._uU(3,"Buscar Bienes"),t.qZA(),t.TgZ(4,"div",20)(5,"input",21),t.NdJ("input",function(i){t.CHM(e);const n=t.oxw();return t.KtG(n.changeBien(i))}),t.qZA()()()()}}function X(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",28),t.NdJ("click",function(){const n=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.checkData(n.int_bien_id))}),t._uU(2),t.qZA(),t.TgZ(3,"td",29),t.NdJ("click",function(){const n=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.checkData(n.int_bien_id))}),t._uU(4),t.qZA(),t.TgZ(5,"td",29),t.NdJ("click",function(){const n=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.checkData(n.int_bien_id))}),t._uU(6),t.qZA(),t.TgZ(7,"td",28),t.NdJ("click",function(){const n=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.checkData(n.int_bien_id))}),t._uU(8),t.qZA(),t.TgZ(9,"td",29),t.NdJ("click",function(){const n=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.checkData(n.int_bien_id))}),t._uU(10),t.qZA()()}if(2&o){const e=r.$implicit;t.xp6(2),t.hij(" ",e.str_codigo_bien_cod," "),t.xp6(2),t.hij(" ",e.str_bien_nombre," "),t.xp6(2),t.hij(" ",e.str_custodio_nombre," "),t.xp6(2),t.hij(" ",e.str_bien_descripcion," "),t.xp6(2),t.hij(" ",e.str_ubicacion_nombre_interno," ")}}function tt(o,r){if(1&o&&(t.TgZ(0,"div",22)(1,"table",23)(2,"thead")(3,"tr",24)(4,"th",25)(5,"div",26),t._uU(6,"Codigo"),t.qZA()(),t.TgZ(7,"th",25)(8,"div",26),t._uU(9,"Nombre"),t.qZA()(),t.TgZ(10,"th",25)(11,"div",26),t._uU(12,"Custodio"),t.qZA()(),t.TgZ(13,"th",25)(14,"div",26),t._uU(15,"Descripci\xf3n"),t.qZA()(),t.TgZ(16,"th",25)(17,"div",26),t._uU(18,"Ubicaci\xf3n"),t.qZA()()()(),t.TgZ(19,"tbody"),t.YNc(20,X,11,5,"tr",27),t.qZA()()()),2&o){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.srvPrestamos.datosSearch)}}function et(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",36)(1,"button",1),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw(2);return t.KtG(n.quitarBien(i))}),t._uU(2," X"),t.qZA()()}}function ot(o,r){if(1&o&&(t.TgZ(0,"table",23)(1,"div",32)(2,"div",33)(3,"thead")(4,"tr",24)(5,"th")(6,"div",26),t._uU(7,"Titulo"),t.qZA()(),t.TgZ(8,"th")(9,"div",26),t._uU(10,"Descripcion"),t.qZA()()()(),t.TgZ(11,"tbody")(12,"tr",34)(13,"td"),t._uU(14,"Nombre del Bien"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA()(),t.TgZ(17,"tr",34)(18,"td"),t._uU(19,"Modelo del Bien"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA()(),t.TgZ(22,"tr",34)(23,"td"),t._uU(24,"Condicion del Bien"),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA()(),t.TgZ(27,"tr",34)(28,"td"),t._uU(29,"Disponibilidad del Bien"),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.qZA()(),t.TgZ(32,"tr",34)(33,"td"),t._uU(34,"Estado del Bien"),t.qZA(),t.TgZ(35,"td"),t._uU(36),t.qZA()(),t.TgZ(37,"tr",34)(38,"td"),t._uU(39,"Descripcion de Condicion"),t.qZA(),t.TgZ(40,"td"),t._uU(41),t.qZA()(),t.TgZ(42,"tr",34)(43,"td"),t._uU(44,"Estado del Bien"),t.qZA(),t.TgZ(45,"td"),t._uU(46),t.qZA()(),t.TgZ(47,"tr",34)(48,"td"),t._uU(49,"Ubicacion"),t.qZA(),t.TgZ(50,"td"),t._uU(51),t.qZA()()()(),t.YNc(52,et,3,0,"div",35),t.qZA()()),2&o){const e=r.$implicit,s=t.oxw(2);t.xp6(16),t.hij(" ",e.str_catalogo_bien_descripcion,""),t.xp6(5),t.hij(" ",e.str_bien_modelo,""),t.xp6(5),t.hij(" ",e.str_condicion_bien_nombre,""),t.xp6(5),t.hij(" ",e.str_bien_habilitado,""),t.xp6(5),t.hij(" ",e.str_bien_estado,""),t.xp6(5),t.hij(" ",e.str_condicion_bien_nombre,""),t.xp6(5),t.hij(" ",e.str_bien_estado_logico,""),t.xp6(5),t.hij(" ",e.str_ubicacion_nombre,""),t.xp6(1),t.Q6J("ngIf",s.bienesSelect.length>1)}}function st(o,r){if(1&o&&(t.TgZ(0,"div",30)(1,"h3"),t._uU(2,"Informacion del Bien"),t.qZA(),t.TgZ(3,"div"),t.YNc(4,ot,53,9,"table",31),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.bienesSelect)}}function it(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",37)(1,"h3"),t._uU(2,"Inducci\xf3n"),t.qZA(),t.TgZ(3,"span",38),t._uU(4," *La inducci\xf3n indica que no conoce el funcionamiento del equipo por lo que requiere asistencia de parte de la persona encargada del bien. "),t.qZA(),t.TgZ(5,"div",39)(6,"div",40)(7,"input",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.tipoPrestamo("SI"))}),t.qZA(),t.TgZ(8,"label",42),t._uU(9,"Si"),t.qZA()(),t.TgZ(10,"div",40)(11,"input",43),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.tipoPrestamo("NO"))}),t.qZA(),t.TgZ(12,"label",44),t._uU(13,"No"),t.qZA()()()()}}function rt(o,r){1&o&&(t.TgZ(0,"div",18)(1,"h3",19),t._uU(2,"Objetivo de uso de los equipos"),t.qZA(),t._UZ(3,"br")(4,"textarea",45),t.qZA())}function nt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",48)(1,"h3"),t._uU(2,"Fecha de petici\xf3n del bien"),t.qZA(),t.TgZ(3,"input",49),t.NdJ("change",function(i){t.CHM(e);const n=t.oxw(2);return t.KtG(n.obtenerfecha(i))}),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.s9C("min",e.fechaValidacion)}}function at(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",40)(2,"div")(3,"input",51),t.NdJ("click",function(i){t.CHM(e);const n=t.oxw(3);return t.KtG(n.agregarHorario(i))}),t.qZA()(),t.TgZ(4,"div")(5,"div"),t._uU(6),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.qZA()()()()}if(2&o){const e=r.$implicit,s=t.oxw(3);t.xp6(3),t.s9C("id",e.id),t.Q6J("disabled","00:00:00"==e.inicio||s.horarioId==e.id&&s.fechaPrestamo===s.fec||s.fechaValidacion===s.fec),t.xp6(3),t.AsE(" ",e.inicio," - ",e.fin," "),t.xp6(2),t.AsE(" ",e.fecha," ",s.fec," ")}}function ct(o,r){if(1&o&&(t.TgZ(0,"table")(1,"tr")(2,"th")(3,"div",50),t._uU(4),t.qZA()()(),t.TgZ(5,"tr")(6,"td"),t.YNc(7,at,9,6,"div",27),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(4),t.hij(" ",e.diaNombre," "),t.xp6(3),t.Q6J("ngForOf",e.intervalos)}}function dt(o,r){if(1&o&&(t.TgZ(0,"div",46)(1,"h3"),t._uU(2,"Horario y disponibilidad"),t.qZA(),t.TgZ(3,"form",8),t.YNc(4,nt,4,1,"div",13),t.qZA(),t.YNc(5,ct,8,2,"table",47),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("formGroup",e.myForm),t.xp6(1),t.Q6J("ngIf",e.moTabla2),t.xp6(1),t.Q6J("ngIf",e.tablaFecha)}}function lt(o,r){if(1&o&&(t.TgZ(0,"div",48)(1,"h3"),t._uU(2,"Fecha de devoluci\xf3n del bien"),t.qZA(),t._UZ(3,"input",52),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.s9C("min",e.myForm.value.fechaPrestamo)}}function _t(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.Agregar(i.int_bien_id))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.str_codigo_bien," ")}}function mt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.Agregar(i.int_bien_id))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.str_bien_nombre," ")}}function pt(o,r){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,_t,2,1,"td",56),t.YNc(2,mt,2,1,"td",57),t.qZA()),2&o){const e=r.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.str_ubicacion_nombre==s.ubicacion),t.xp6(1),t.Q6J("ngIf",e.str_ubicacion_nombre==s.ubicacion)}}function gt(o,r){if(1&o&&(t.TgZ(0,"div",53)(1,"div",54)(2,"h3"),t._uU(3,"Bienes a cargo de:"),t.qZA(),t.TgZ(4,"h4"),t._uU(5),t.qZA(),t.TgZ(6,"h3"),t._uU(7,"Centro"),t.qZA(),t.TgZ(8,"h4"),t._uU(9),t.qZA()(),t.TgZ(10,"div",55)(11,"table",23)(12,"thead")(13,"tr",24)(14,"th",25)(15,"div",26),t._uU(16,"Codigo"),t.qZA()(),t.TgZ(17,"th",25)(18,"div",26),t._uU(19,"Nombre"),t.qZA()()()(),t.TgZ(20,"tbody"),t.YNc(21,pt,3,2,"tr",27),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(5),t.Oqu(e.srvInventario.dataBienInfo.str_custodio_nombre),t.xp6(4),t.Oqu(e.ubicacion),t.xp6(12),t.Q6J("ngForOf",e.bienesCustodio)}}let ht=(()=>{class o{constructor(e,s,i,n,c,l,h){this.srvPrestamos=e,this.srvInventario=s,this.srvCentros=i,this.srvHorario=n,this.srvPersona=c,this.fb=l,this.srvUsuarios=h,this.destroy$=new u.x,this.currentPage=1,this.mapFiltersToRequest={},this.cedulaLogin={},this.data="",this.parameter="",this.elementPagina={dataLength:0,metaData:0,currentPage:0},this.isLoading=!1,this.isData=!1,this.arrBien=[],this.bienesSelect=[],this.bienesCustodio=[],this.fechaActual=new Date,this.fechasSemana=[],this.diasemanaActual=[],this.acept=!1,this.sinHorario=!1,this.tipoP=!1,this.intervalos=[],this.tablaFecha=!1,this.estadosTecnicos=[],this.myForm=this.fb.group({codigoBien:[[]],personaId:[""],objetoInvestigacion:["",g.kI.required],horarioId:[""],fechaPrestamo:["",g.kI.required],estadoId:[5],personaNombre:[""],custodioId:[""],custodioNombre:[""],induccion:[""],fdevolucion:[""],estadoTecnico:[[]]})}ngOnInit(){console.log(this.srvPersona.dataMe),this.fechaValidacion=this.fechaActual.getMonth()+1<10?this.fechaActual.getFullYear()+"-0"+(this.fechaActual.getMonth()+1)+"-"+this.fechaActual.getDate():this.fechaActual.getFullYear()+"-"+(this.fechaActual.getMonth()+1)+"-"+this.fechaActual.getDate();const e=this.fechaActual.getHours().toString().padStart(2,"0"),s=this.fechaActual.getMinutes().toString().padStart(2,"0"),i=this.fechaActual.getSeconds().toString().padStart(2,"0");this.hora=`${e}:${s}:${i}`,console.log("hora ->",this.hora),console.log("fecha validacion ->",this.fechaValidacion),this.tipoP=!0,this.srvHorario.horarioPrestamo=[],this.bienesSelect=[],this.fechaSemana(this.fechaActual),this.srvPrestamos.obtenerPrestamo(),this.myForm.get("personaId")?.setValue(this.srvPersona.dataMe.str_per_cedula),this.myForm.get("personaNombre")?.setValue(this.srvPersona.dataMe.str_per_nombres+" "+this.srvPersona.dataMe.str_per_apellidos),this.srvHorario.horarioPrestamo=[]}regresar(){this.srvPrestamos.typeview=!1}changeBien(e){this.moTabla2=!1;const s=e.target.value.length;if(s%2==0&&s>2){const i=Number(e.target.value);isNaN(i)?this.searchBien2({filter:{status:{parameter:"str_bien_estado",data:"ACTIVO"},like:{parameter:"str_bien_nombre",data:e.target.value}}}):this.searchBien2({filter:{status:{parameter:"str_bien_estado",data:"ACTIVO"},like:{parameter:"str_codigo_bien",data:e.target.value}}})}}searchBien(e){this.srvInventario.getfiltro(e).pipe((0,_.R)(this.destroy$)).subscribe({next:i=>{this.srvPrestamos.datosSearch=i.body.filter(n=>0!==n.int_bien_estado_historial),this.moTabla=!0}})}searchBien2(e){this.srvPrestamos.getFiltroBien(e).pipe((0,_.R)(this.destroy$)).subscribe({next:s=>{console.log("resBien ->",s.body),this.srvPrestamos.datosSearch=s.body.filter(i=>0!==i.int_bien_estado_historial),console.log("datos search ->",this.srvPrestamos.datosSearch),this.moTabla=!0}})}checkData(e){this.srvPrestamos.datosSearch=[],this.moTabla=!1,this.moTabla2=!0,this.srvInventario.getBienById(e).pipe((0,_.R)(this.destroy$)).subscribe({next:s=>{console.log("datos bien ->",s.body),this.getValidacion(s.body.str_codigo_bien_cod),this.ubicacion=s.body.str_ubicacion_nombre,this.srvInventario.dataBienInfo=s.body,this.cedulaCustodio=s.body.str_custodio_cedula,this.obtenerDatosCentralizada(this.cedulaCustodio),this.bienesSelect.push(s.body),this.bienesCustodio=[],this.getBienesOtros(),this.traerCentro()},error:s=>{console.log("error al obtener el bien",s)}})}obtenerDatosCentralizada(e){d().fire({title:"Buscando...",didOpen:()=>{d().showLoading()}}),this.srvUsuarios.getCentralizada(e).pipe((0,_.R)(this.destroy$)).subscribe({next:s=>{s.status?(d().close(),d().fire({title:"Usuario encontrado",icon:"success",showConfirmButton:!1,timer:3e3}),console.log("res ->",s.body)):(d().close(),d().fire({title:"Usuario no encontrado",icon:"error",showConfirmButton:!1,timer:3e3}))},error:s=>{console.log("err",s)},complete:()=>{}})}getValidacion(e){console.log("si entra al getValidacion"),this.srvPrestamos.getValidacion(e).pipe((0,_.R)(this.destroy$)).subscribe({next:s=>{console.log("data ->",s.body),s.body&&(this.fechaPrestamo=s.body[0].dt_fecha_prestamo,this.fechaPrestamo=this.fechaPrestamo.split("T")[0],console.log("fecha prestamo ->",this.fechaPrestamo),this.horarioId=s.body[0].int_horario_id,console.log("horario id ->",this.horarioId))},error:s=>{console.log("error ->",s)}})}getBienesOtros(){this.acept=!1,this.mapFiltersToRequest={size:100,page:1,parameter:"",data:""},d().fire({title:"Cargando Bienes...",didOpen:()=>{d().showLoading()}}),this.srvInventario.getBienesPorCustodio(this.mapFiltersToRequest,this.cedulaCustodio).pipe((0,_.R)(this.destroy$)).subscribe({next:e=>{if(this.isData=!1,e.body.length>0){this.isData=!0,this.srvInventario.datosOtros=e.body;const s=new Set(this.bienesSelect.map(i=>i.int_bien_id));this.bienesCustodio=this.srvInventario.datosOtros.filter(i=>!s.has(i.int_bien_id)),0==this.sinHorario&&d().close()}},error:e=>{console.log("Error al obtener los Bienes Otros",e)},complete:()=>{}})}Agregar(e){this.checkData(e)}quitarBien(e){this.estadosTecnicos.splice(e,1),this.bienesSelect.splice(e,1),this.getBienesOtros()}traerCentro(){this.mapFiltersToRequest={size:10,page:1,parameter:"str_centro_nombre",data:this.ubicacion},this.srvCentros.getCenter(this.mapFiltersToRequest).pipe((0,_.R)(this.destroy$)).subscribe({next:e=>{console.log("centro ->",e.body),this.srvHorario.getHorarios(e.body[0].int_centro_id),this.horario()},error:e=>{console.log("error ->",e)},complete:()=>{}})}horario(){this.srvHorario.SelectHorarioCentro$.pipe((0,_.R)(this.destroy$)).subscribe({next:e=>{this.srvHorario.horarioPrestamo=e.body,this.srvHorario.horarioPrestamo&&(this.srvHorario.horarioPrestamo.length>0?(this.ordenarHorario(this.srvHorario.horarioPrestamo),this.fechasSemana.forEach((s,i)=>{this.fechasSemana[i].intervalos=this.srvHorario?.horarioPrestamo[i].intervalos}),this.sinHorario=!1,this.moTabla2=!0):(d().fire({icon:"warning",title:"No hay horarios disponibles"}),this.sinHorario=!0,this.moTabla2=!1,this.bienesSelect.length>1&&this.bienesSelect.splice(0,1)))},error:e=>{console.log("error ->",e)}})}ordenarHorario(e){const s={Lunes:0,Martes:1,Mi\u00e9rcoles:2,Jueves:3,Viernes:4};e.sort((c,l)=>s[c.dia]-s[l.dia])}EstadoTecnico(e){if(this.comprobante=0,this.estadosTecnicos)if(this.estadosTecnicos.length>0)for(let s=0;s<this.estadosTecnicos.length;s++)this.estadosTecnicos[s].id!==e.target.id?(console.log("entra al if 3",this.estadosTecnicos),this.estadosTecnicos.push({estado:e.target.value,id:e.target.id})):this.estadosTecnicos[s].id===e.target.id&&0===this.comprobante&&(this.estadosTecnicos.splice(s,1),this.estadosTecnicos.push({estado:e.target.value,id:e.target.id}),this.comprobante=1);else this.estadosTecnicos.push({estado:e.target.value,id:e.target.id});else this.estadosTecnicos.push({estado:e.target.value,id:e.target.id})}agregarPrestamo(){this.myForm.get("codigoBien")?.setValue(this.bienesSelect.map(e=>e.str_codigo_bien_cod)),this.myForm.get("custodioId")?.setValue(this.cedulaCustodio),this.myForm.get("custodioNombre")?.setValue(this.srvInventario.dataBienInfo.str_custodio_nombre),this.myForm.get("estadoTecnico")?.setValue(this.estadosTecnicos),console.log("form ->",this.myForm.value),d().fire({title:"\xbfEst\xe1 seguro de crear este prestamo ?",showDenyButton:!0,confirmButtonText:"Agregar",denyButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(this.srvPrestamos.crearPrestamo(this.myForm.value),this.srvPrestamos.typeview=!1)})}fechaSemana(e){const s=["Lunes","Martes","Miercoles","Jueves","Viernes","Sabado","Domingo"],i=e.getDay();this.diaActual=e.getDate(),this.aux1=i;const n=new Date(e);n.setDate(e.getDate()-i+(0===i?-6:1));for(let c=0;c<5;c++){this.aux1<=c&&this.diasemanaActual.push(s[c]);const l=new Date(n);l.setDate(n.getDate()+c),this.fechasSemana.push({fecha:l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate(),diaNum:l.getDate()})}}obtenerfecha(e){console.log("fecha ->",e.target.value);const i=new Date(e.target.value),n=i.getDay();this.diaNombre=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","Sabado","Domingo"][n],this.fec=e.target.value,console.log("fecha fec ->",this.fec," fechaPrestamo",this.fechaPrestamo,"fechaValidacion",this.fechaValidacion);const c=i.toISOString().split("T")[0];if("Domingo"===this.diaNombre||"Sabado"===this.diaNombre)this.tablaFecha=!1,d().fire({icon:"warning",title:"Los fines de semana no estan disponibles para prestamos"});else{this.tablaFecha=!0,this.myForm.get("fdevolucion")?.setValue(c);for(let l=0;l<this.srvHorario.horarioPrestamo.length;l++)this.diaNombre===this.srvHorario.horarioPrestamo[l].dia&&this.srvHorario.horarioPrestamo[l].intervalos.length>0&&(this.intervalos=this.srvHorario.horarioPrestamo[l].intervalos,this.sinHorario=!1);console.log("intervalos ->",this.intervalos)}}getPrestamos(){d().fire({title:"Cargando...",didOpen:()=>{d().showLoading()}}),this.srvPrestamos.getPrestamosConEstado({}).pipe((0,_.R)(this.destroy$)).subscribe({next:e=>{0===e.body.length?(this.isData=!1,this.isLoading=!1):(this.isLoading=e.status,this.isData=e.status),console.log("lo que viene ---\x3e",e.body),this.srvPrestamos.datosPrestamo=e.body,this.metadata=e.total,d().close()},error(e){console.log("Error: ",e)}})}tipoPrestamo(e){this.myForm.get("induccion")?.setValue(e)}agregarHorario(e){this.acept=!0,this.myForm.get("horarioId")?.setValue(e.target.id)}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.W),t.Y36(V.I),t.Y36(G.B),t.Y36(z.W),t.Y36(A.F),t.Y36(g.qu),t.Y36(K.X))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-agregar-prestamo"]],decls:20,vars:11,consts:[[1,"back"],[1,"btn-primary-add",3,"click"],[1,"containerRes"],["class","container-Find filtradoContainer",4,"ngIf"],[1,"padre-check",2,"height","100%"],["class","tabla-cuerpo","style","height: 90% !important;",4,"ngIf"],[2,"display","grid","grid-template-columns","1.5fr 1fr","gap","20px","padding-bottom","20px"],["class","tableBo",4,"ngIf"],["action","",3,"formGroup"],["style","display: grid; padding-top: 10px; padding-bottom: 10px;",4,"ngIf"],["class","containerInfo ",4,"ngIf"],["style","margin-bottom: 20px; display: grid; gap: 15px;",4,"ngIf"],[3,"formGroup"],["class","containerInfo","style","width: 25% !important;",4,"ngIf"],[1,"btn-primary-add",3,"disabled","click"],[2,"height","50vh"],["class","tableBo","style","height: 100%;",4,"ngIf"],[1,"container-Find","filtradoContainer"],[1,"containerInfo"],["for",""],[1,"container-Input"],["id","inp-Centro","type","text","autocomplete","off","placeholder","DIGITE NOMBRE DEL BIEN","required","",1,"",3,"input"],[1,"tabla-cuerpo",2,"height","90% !important"],[1,"table","table-striped","tabla-estilos"],[1,"encabezado"],[1,"th-head"],[1,"d-flex"],[4,"ngFor","ngForOf"],["id","dato-check",1,"select",3,"click"],["id","name-check",1,"select",3,"click"],[1,"tableBo"],["class","table table-striped tabla-estilos",4,"ngFor","ngForOf"],[2,"display","grid","grid-template-columns","2fr 0.5fr"],[2,"display","table","padding-bottom","10px"],[1,"container-Row"],["style","display: flex; align-items: center; justify-content: center;",4,"ngIf"],[2,"display","flex","align-items","center","justify-content","center"],[2,"display","grid","padding-top","10px","padding-bottom","10px"],[2,"font-size","smaller","font-style","oblique","color","var(--bs-gray-600)"],[2,"display","grid","gap","10px","padding","10px"],[2,"display","flex","gap","10px","align-items","center"],["type","radio","name","tipoPrestamo","id","interno",3,"click"],["for","interno"],["type","radio","name","tipoPrestamo","id","externo",3,"click"],["for","externo"],["formControlName","objetoInvestigacion","type","text","placeholder","Breve descripci\xf3n del uso que se dar\xe1 a el/los equipos","rows","7","cols","5000",2,"resize","none"],[2,"margin-bottom","20px","display","grid","gap","15px"],[4,"ngIf"],[1,"containerInfo",2,"width","25% !important"],["type","date","name","","id","","formControlName","fechaPrestamo",3,"min","change"],[2,"display","grid","justify-content","center"],["type","radio","name","disponibilidad",3,"id","disabled","click"],["type","date","formControlName","fdevolucion","name","","id","",3,"min"],[1,"tableBo",2,"height","100%"],[2,"padding-bottom","10px"],[2,"height","100%","overflow","auto"],["class","select","id","dato-check",3,"click",4,"ngIf"],["class","select","id","name-check",3,"click",4,"ngIf"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return s.regresar()}),t._uU(2," Regresar"),t.qZA()(),t.TgZ(3,"div",2),t.YNc(4,W,6,0,"div",3),t.TgZ(5,"div",4),t.YNc(6,tt,21,1,"div",5),t.qZA()(),t.TgZ(7,"div",6)(8,"div"),t.YNc(9,st,5,1,"div",7),t.TgZ(10,"form",8),t.YNc(11,it,14,0,"div",9),t.YNc(12,rt,5,0,"div",10),t.qZA(),t.YNc(13,dt,6,3,"div",11),t.TgZ(14,"form",12),t.YNc(15,lt,4,1,"div",13),t.qZA(),t.TgZ(16,"button",14),t.NdJ("click",function(){return s.agregarPrestamo()}),t._uU(17," Guardar "),t.qZA()(),t.TgZ(18,"div",15),t.YNc(19,gt,22,3,"div",16),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngIf",!s.moTabla2),t.xp6(2),t.Q6J("ngIf",s.moTabla),t.xp6(3),t.Q6J("ngIf",s.moTabla2),t.xp6(1),t.Q6J("formGroup",s.myForm),t.xp6(1),t.Q6J("ngIf",s.moTabla2),t.xp6(1),t.Q6J("ngIf",s.moTabla2),t.xp6(1),t.Q6J("ngIf",s.moTabla2),t.xp6(1),t.Q6J("formGroup",s.myForm),t.xp6(1),t.Q6J("ngIf",!s.tipoP&&s.moTabla2),t.xp6(1),t.Q6J("disabled",!s.myForm.valid&&!s.acept),t.xp6(3),t.Q6J("ngIf",s.moTabla2))},dependencies:[p.sg,p.O5,g._Y,g.Fj,g.JJ,g.JL,g.sg,g.u],styles:[".select[_ngcontent-%COMP%]{padding:10px 5px;width:10px}.select[_ngcontent-%COMP%]{cursor:pointer}th[_ngcontent-%COMP%]{color:var(--bs-gray-900);border-bottom:1px solid var(--bs-gray-ccc);border-right:1px solid var(--bs-gray-ccc);border-left:1px solid var(--bs-gray-ccc);font-size:var(--font-size);padding:5px;text-align:left;vertical-align:middle}th[_ngcontent-%COMP%]:first-child{border-top-left-radius:3px}th[_ngcontent-%COMP%]:last-child{border-top-right-radius:3px;border-left:none;border-right:1px solid var(--bs-gray-ccc)}tr[_ngcontent-%COMP%]{border-top:1px solid var(--bs-gray-ccc);border-bottom:1px solid var(--bs-gray-ccc);border-left:1px solid var(--bs-gray-ccc);border-right:1px solid var(--bs-gray-ccc);color:var(--bs-gray-ccc);font-size:var(--font-size);font-weight:400;text-shadow:0 1px 1px rgba(256,256,256,.1)}tr[_ngcontent-%COMP%]:first-child{border-top:none}tr[_ngcontent-%COMP%]:last-child{border-bottom:none}td[_ngcontent-%COMP%]{background:var(--color-bg);padding:5px;text-align:left;vertical-align:middle;font-size:var(--font-size);border-right:1px solid var(--bs-gray-ccc);border-left:1px solid var(--bs-gray-ccc);border-bottom:1px solid var(--bs-gray-ccc);font-family:var(--font-family);text-transform:uppercase;color:var(--color-black)}td[_ngcontent-%COMP%]:last-child{border-left:none}.span-Subtitle[_ngcontent-%COMP%]{font-size:16px;font-weight:var(--font-weight-bold);margin-top:3rem}.buttons-action[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-bottom:15px}h4[_ngcontent-%COMP%]{font-size:20px;font-weight:var(--bs-gray-700)}textarea[_ngcontent-%COMP%]{border:.5px solid var(--bs-gray-ccc);border-radius:4px;padding-left:5px;height:100px;width:100%}"]}),o})();var ut=a(6792);function ft(o,r){if(1&o&&(t.TgZ(0,"td")(1,"div",13)(2,"div",14),t._uU(3),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.str_estado_prestamo_estado," ")}}function vt(o,r){if(1&o&&(t.TgZ(0,"td")(1,"div",13)(2,"div",15),t._uU(3),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.str_estado_prestamo_estado," ")}}function bt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.deleteEstado(i.int_estado_prestamo_id))}),t.TgZ(1,"i",17),t._uU(2," delete "),t.qZA()()}}function xt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.deleteEstado(i.int_estado_prestamo_id))}),t.TgZ(1,"i",17),t._uU(2," loop "),t.qZA()()}}function Pt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.YNc(7,ft,4,1,"td",8),t.YNc(8,vt,4,1,"td",8),t.TgZ(9,"td")(10,"button",9)(11,"i",10),t.NdJ("click",function(){const n=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.modificarEstado(n.int_estado_prestamo_id,"Editar Estados de Prestamo","modificarEstadosPrestamo"))}),t._uU(12," create "),t.qZA()(),t.YNc(13,bt,3,0,"button",11),t.YNc(14,xt,3,0,"button",12),t.qZA()()}if(2&o){const e=r.$implicit,s=r.index;t.xp6(2),t.hij(" ",s+1,""),t.xp6(2),t.hij(" ",e.str_estado_prestamo_nombre," "),t.xp6(2),t.hij("",e.dt_fecha_creacion.substring(0,10)," "),t.xp6(1),t.Q6J("ngIf","ACTIVO"===e.str_estado_prestamo_estado),t.xp6(1),t.Q6J("ngIf","INACTIVO"===e.str_estado_prestamo_estado),t.xp6(5),t.Q6J("ngIf","ACTIVO"===e.str_estado_prestamo_estado),t.xp6(1),t.Q6J("ngIf","INACTIVO"===e.str_estado_prestamo_estado)}}function Tt(o,r){if(1&o&&(t.TgZ(0,"div",3)(1,"table",4)(2,"thead")(3,"tr",5)(4,"th")(5,"div",6),t._uU(6," # "),t.qZA()(),t.TgZ(7,"th")(8,"div",6),t._uU(9,"Nombre"),t.qZA()(),t.TgZ(10,"th")(11,"div",6),t._uU(12,"Fecha Creacion"),t.qZA()(),t.TgZ(13,"th")(14,"div",6),t._uU(15,"Estado"),t.qZA()(),t.TgZ(16,"th")(17,"div",6),t._uU(18,"Acciones"),t.qZA()()()(),t.TgZ(19,"tbody"),t.YNc(20,Pt,15,7,"tr",7),t.qZA()()()),2&o){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.estadosPrestamo)}}function Zt(o,r){1&o&&(t.TgZ(0,"div",19)(1,"div",20),t.O4$(),t.TgZ(2,"svg",21),t._UZ(3,"path",22),t.qZA(),t.kcU(),t.TgZ(4,"h5",23),t._uU(5,"Resultado sin datos"),t.qZA(),t.TgZ(6,"h6",24),t._uU(7,"No se encontraron elementos para esta lista."),t.qZA()()())}let Ct=(()=>{class o{constructor(e,s){this.srvEstadosPrestamos=e,this.srvModal=s,this.destroy$=new u.x,this.isLoading=!1,this.isData=!1,this.elementForm={form:"",title:"",special:!0},this.estadosPrestamo=[]}ngOnInit(){this.srvEstadosPrestamos.obtenerEstadosPrestamo({}),this.srvEstadosPrestamos.SelectMetadataEstadoPrestamo$.pipe((0,_.R)(this.destroy$)).subscribe({next:e=>{this.isLoading=e.status,this.isData=e.status},error(e){console.log("Error: ",e)}}),this.srvEstadosPrestamos.SelectDataEstadoPrestamo$.pipe((0,_.R)(this.destroy$)).subscribe({next:e=>{this.estadosPrestamo=e},error(e){console.log("Error: ",e)}})}modificarEstado(e,s,i){this.srvEstadosPrestamos.idEstados=e,this.elementForm.title=s,this.elementForm.form=i,this.srvModal.setForm(this.elementForm),this.srvModal.openModal()}deleteEstado(e){d().fire({title:"\xbfEst\xe1 seguro que desea modificar este Estado de Prestamo?",showDenyButton:!0,text:"Al deshabilitar un Estado de Prestamo, este no podra acceder al sistema. Este cambio puede ser revertido en cualquier momento",confirmButtonText:"Si, modificar",denyButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&(d().fire({title:"Modificando Estado de Prestamo...",didOpen:()=>{d().showLoading()}}),this.srvEstadosPrestamos.deleteEstadoPrestamo(e).pipe((0,_.R)(this.destroy$)).subscribe({next:i=>{i.status?d().fire({title:"Estado de Prestamo modificado corectamente",icon:"success",showConfirmButton:!1,timer:3e3}):d().fire({title:"No se modifico el Estado de Prestamo",icon:"error",showConfirmButton:!1,timer:3e3}),setTimeout(()=>{d().close()},3e3)},error:i=>{console.log("err",i)},complete:()=>{this.srvEstadosPrestamos.obtenerEstadosPrestamo({})}}))})}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(ut.B),t.Y36(C.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mostrar-estados"]],decls:3,vars:2,consts:[[1,"tabla-cuerpo"],["class","tableBo",4,"ngIf"],["class","containerNoData",4,"ngIf"],[1,"tableBo"],[1,"table","table-striped","tabla-estilos"],[1,"encabezado"],[1,"d-flex"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-primary"],[1,"material-icons",3,"click"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-loop",3,"click",4,"ngIf"],[1,"estado"],[1,"activo"],[1,"inactivo"],[1,"btn","btn-danger",3,"click"],[1,"material-icons"],[1,"btn","btn-loop",3,"click"],[1,"containerNoData"],["_ngcontent-lne-c77","",1,"mx-auto",2,"margin-top","64px","margin-bottom","64px"],["_ngcontent-lne-c77","","xmlns","http://www.w3.org/2000/svg","height","32","width","32","viewBox","0 0 48 48"],["_ngcontent-lne-c77","","d","M38.7 40.85 26.65 28.8q-1.5 1.3-3.5 2.025-2 .725-4.25.725-5.4 0-9.15-3.75T6 18.75q0-5.3 3.75-9.05 3.75-3.75 9.1-3.75 5.3 0 9.025 3.75 3.725 3.75 3.725 9.05 0 2.15-.7 4.15-.7 2-2.1 3.75L40.95 38.7q.45.4.45 1.025 0 .625-.5 1.125-.45.45-1.1.45-.65 0-1.1-.45Zm-19.85-12.3q4.05 0 6.9-2.875Q28.6 22.8 28.6 18.75t-2.85-6.925Q22.9 8.95 18.85 8.95q-4.1 0-6.975 2.875T9 18.75q0 4.05 2.875 6.925t6.975 2.875Z"],["_ngcontent-lne-c77","",1,"mt-2"],["_ngcontent-lne-c77",""]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Tt,21,1,"div",1),t.YNc(2,Zt,8,0,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",s.isLoading&&s.isData),t.xp6(1),t.Q6J("ngIf",!s.isLoading&&!s.isData))},dependencies:[p.sg,p.O5]}),o})();var At=a(1354);function yt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",15)(1,"app-button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.agg())}),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("form","")("title","Agregar Prestamos"))}function Mt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",15)(1,"app-button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.agg())}),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("form","agregarEstadosPrestamo")("title","Agregar Estados de Prestamo"))}function It(o,r){if(1&o&&(t.TgZ(0,"div",17)(1,"button",18),t._uU(2," Prestamo "),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Gre("nav-link ",1===e.menuTabsSelected?"active":1==e.isValue," "),t.Q6J("routerLink","/prestamos/"+e.baseUrl+"prestamo")}}function qt(o,r){if(1&o&&(t.TgZ(0,"div",17)(1,"button",19),t._uU(2," Gestion "),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Gre("nav-link ",2===e.menuTabsSelected?"active":2==e.isValue,""),t.Q6J("routerLink","/prestamos/"+e.baseUrl+"gestion")}}function Ot(o,r){1&o&&t._UZ(0,"app-mostrar-prestamo")}function Et(o,r){1&o&&t._UZ(0,"app-agregar-prestamo")}function Nt(o,r){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,Ot,1,0,"app-mostrar-prestamo",21),t.YNc(2,Et,1,0,"app-agregar-prestamo",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.srvPrestamo.typeview),t.xp6(1),t.Q6J("ngIf",e.srvPrestamo.typeview)}}function Ut(o,r){1&o&&(t.TgZ(0,"div",22),t._UZ(1,"app-mostrar-estados"),t.qZA())}function wt(o,r){1&o&&(t.TgZ(0,"div",23)(1,"div",24)(2,"h1",25),t._uU(3," M\xf3dulo de "),t.TgZ(4,"span"),t._uU(5,"Pr\xe9stamos"),t.qZA()(),t.TgZ(6,"p"),t._uU(7," Apartado donde podr\xe1 realizar pr\xe9stamos de bienes pertenecientes a un laboratorio o departamento de la ESPOCH. "),t.qZA()(),t.TgZ(8,"div",26),t._UZ(9,"img",27)(10,"img",28),t.qZA()())}const Ft=[{path:"",component:(()=>{class o{constructor(e,s){this.srvMenu=e,this.srvPrestamo=s,this.destroy$=new u.x,this.isValue=0,this.baseUrl=T.Z.URL_BASE_PATH,this.typeViewMenu=!0,this.menuTabsSelected=0,this.menuTabInventory=0,this.listaViews={PRESTAMOS:0,PRESTAMO:1,GESTION:2},this.elementForm={form:"",title:"",special:!0},this.dataValue={typeView:!0,valorView:0}}ngOnInit(){const e=window.location.pathname.split("/").pop()||"";this.menuTabsSelected=this.listaViews[e.toUpperCase()]||0,console.log("probando --------\x3e",this.menuTabsSelected),this.srvPrestamo.SelectButtonName$.pipe((0,_.R)(this.destroy$)).subscribe({next:s=>{this.menuTabInventory=s.id}}),this.id="nav-inventory",this.isValue=1,this.menuTabInventory=0}agg(){this.srvPrestamo.typeview=!0}permisoCrear(e){return this.srvMenu.permisos.find(s=>s.str_menu_path===e)?.bln_crear??!1}permisoVer(e){return this.srvMenu.permisos.find(i=>i.str_menu_path===e)?.bln_ver??!1}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.h),t.Y36(b.W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-prestamos"]],decls:21,vars:7,consts:[[1,"father"],[1,"containerBody"],[1,"titleConfiguration"],[1,"titleButton"],[1,"title"],[2,"color","#B41A12"],[2,"color","rgb(160, 160, 160)","font-family","'Roboto', Arial, sans-serif","font-size","14px"],["class","buttonAgg",4,"ngIf"],[1,"navSection"],["id","menu",1,"containerNavOptions"],["class","container-button","id","nav-Report",4,"ngIf"],[1,"containerContent"],["class","tab-pane fade","id","nav-report",4,"ngIf"],["class","tab-pane fade","id","nav-inform","typeView","true",4,"ngIf"],["class","container-Welcome",4,"ngIf"],[1,"buttonAgg"],[3,"form","title","click"],["id","nav-Report",1,"container-button"],["id","nav-report","type","button",3,"routerLink"],["id","nav-inform","type","button",3,"routerLink"],["id","nav-report",1,"tab-pane","fade"],[4,"ngIf"],["id","nav-inform","typeView","true",1,"tab-pane","fade"],[1,"container-Welcome"],[1,"container-Left"],[2,"font-size","50px","font-family","var(--font-family)","font-weight","var(--font-weight-bold)","color","var(--bs-gray-600)"],[1,"container-Right"],["src","../../../../assets/img/logo-espoch.svg","alt","logo-espoch",1,"logo-Espoch"],["src","../../../../assets/img/characteristics.svg","alt","logo-characteristics",1,"logo-Inventory"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),t._uU(6,"Pantalla de "),t.TgZ(7,"span",5),t._uU(8," Prestamos "),t.qZA()(),t.TgZ(9,"span",6),t._uU(10," Listado de Prestamos de bienes "),t.qZA()(),t.YNc(11,yt,2,2,"div",7),t.YNc(12,Mt,2,2,"div",7),t.qZA(),t.TgZ(13,"nav",8)(14,"div",9),t.YNc(15,It,3,4,"div",10),t.YNc(16,qt,3,4,"div",10),t.qZA()(),t.TgZ(17,"div",11),t.YNc(18,Nt,3,2,"div",12),t.YNc(19,Ut,2,0,"div",13),t.YNc(20,wt,11,0,"div",14),t.qZA()()()()),2&e&&(t.xp6(11),t.Q6J("ngIf",1===s.menuTabsSelected&&s.permisoCrear("prestamos")&&0==s.srvPrestamo.typeview),t.xp6(1),t.Q6J("ngIf",2===s.menuTabsSelected&&s.permisoCrear("prestamos/gestion")),t.xp6(3),t.Q6J("ngIf",s.permisoVer("prestamos/prestamo")),t.xp6(1),t.Q6J("ngIf",s.permisoVer("prestamos/gestion")),t.xp6(2),t.Q6J("ngIf",1===s.menuTabsSelected),t.xp6(1),t.Q6J("ngIf",2===s.menuTabsSelected),t.xp6(1),t.Q6J("ngIf",0===s.menuTabsSelected))},dependencies:[p.O5,v.rH,j,ht,Ct,At.r],styles:[".titleConfiguration[_ngcontent-%COMP%]{width:100%;height:10%}.buttonAgg[_ngcontent-%COMP%]{display:flex;gap:15px}.titleButton[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-content:center;margin-bottom:20px}.showCenter[_ngcontent-%COMP%]{height:880%}.father[_ngcontent-%COMP%]{width:auto;padding:2rem;min-width:250px;display:flex}.containerBody[_ngcontent-%COMP%]{width:100%;height:100%}.titleConfiguration[_ngcontent-%COMP%]{height:10%;float:left}.containerContent[_ngcontent-%COMP%]{width:100%;padding-top:15px}.titleConfiguration[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;font-family:Arial,Helvetica,sans-serif;font-weight:500;color:#0c0c0c}.containerNavOptions[_ngcontent-%COMP%]{display:flex;padding-top:20px;border-bottom:1px solid #ccc;position:relative;z-index:0;width:100%;height:100%;overflow:auto}.container-button[_ngcontent-%COMP%]{height:100%;display:flex}.container-button[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-bottom:1px solid}.container-button[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{width:5%;height:100%}.containerNavOptions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;margin-right:20px;display:flex;border:none;align-items:center;font-size:14px;padding-bottom:5px}.containerNavOptions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:none;display:flex;border:none;align-items:center;color:#b41a12;position:relative;cursor:pointer}.containerNavOptions[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#b41a12;font-weight:500;border-bottom:solid 1px #B41A12}.container-button[_ngcontent-%COMP%]:focus{border-bottom:#B41A12;border:solid 2px #B41A12;position:relative}.containerNavOptions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::-moz-focus-inner{background:none;display:flex;border:none;align-items:center;font-weight:600;border-bottom:solid 1px #B41A12;color:#b41a12;cursor:pointer}.btn-agg-Users[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}.containerBtnAgregar[_ngcontent-%COMP%]{justify-content:center;width:inherit;height:100%}.btn-agg[_ngcontent-%COMP%]{float:right;display:flex}.component[_ngcontent-%COMP%]{float:left;width:100%;height:100%}.tab-pane.fade[_ngcontent-%COMP%]{width:100%;height:100%}.set[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.tableBo[_ngcontent-%COMP%]{overflow-y:hidden;overflow-x:auto}.container-Welcome[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:25px;margin-top:25px}.container-Left[_ngcontent-%COMP%], .container-Right[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:25px}.container-Right[_ngcontent-%COMP%]{align-items:center;justify-content:center}.logo-Espoch[_ngcontent-%COMP%], .logo-Inventory[_ngcontent-%COMP%]{width:150px;height:150px}.tituloModulo[_ngcontent-%COMP%]{font-size:50px;font-family:var(--font-family);font-weight:var(--font-weight-bold);color:var(--bs-gray-600)}span[_ngcontent-%COMP%]{color:var( --color-accent)}p[_ngcontent-%COMP%]{font-size:20px;font-family:var(--font-family);font-weight:500;text-align:justify}"]}),o})()}];let Jt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[v.Bz.forChild(Ft),v.Bz]}),o})()},7323:(y,f,a)=>{a.r(f),a.d(f,{PrestamosModule:()=>p});var v=a(6895),T=a(7590),u=a(801),_=a(5642),t=a(6264),x=a(4650);const b=[{path:"",children:[{path:"prestamo",loadChildren:()=>Promise.resolve().then(a.bind(a,7590)).then(m=>m.PrestamosRoutingModule)},{path:"gestion",loadChildren:()=>Promise.resolve().then(a.bind(a,7590)).then(m=>m.PrestamosRoutingModule)}]}];let p=(()=>{class m{}return m.\u0275fac=function(Z){return new(Z||m)},m.\u0275mod=x.oAB({type:m}),m.\u0275inj=x.cJS({imports:[v.ez,T.PrestamosRoutingModule,u.h,_.K,t.Bz.forChild(b)]}),m})()}}]);