"use strict";(self.webpackChunkcliente=self.webpackChunkcliente||[]).push([[296],{9296:(Y,p,a)=>{a.r(p),a.d(p,{CentrosModule:()=>Q});var d=a(6895),m=a(7046),t=a(4650),u=a(8095),g=a(7579),_=a(2722),h=a(5226),c=a.n(h),C=a(8300),f=a(4033),v=a(484),x=a(6588),T=a(7443);function Z(n,s){1&n&&(t.TgZ(0,"th",8)(1,"div",9),t._uU(2,"Acciones"),t.qZA()())}function M(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td",12),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.detalles(r.int_centro_id))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.str_centro_nombre_dependencia,"")}}function b(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td",12),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.detalles(r.int_centro_id))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.str_centro_cod_facultad," ")}}function A(n,s){if(1&n&&(t.TgZ(0,"td")(1,"div",19)(2,"div",20),t._uU(3),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.str_centro_estado," ")}}function y(n,s){if(1&n&&(t.TgZ(0,"td")(1,"div",19)(2,"div",21),t._uU(3),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.str_centro_estado," ")}}function w(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.modifyCenter(r.int_centro_id,"Editar Centros","editarCentros"))}),t.TgZ(1,"i",14),t._uU(2,"create"),t.qZA()()}}function q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.deleteCenter(r.int_centro_id))}),t.TgZ(1,"i",14),t._uU(2," delete "),t.qZA()()}}function N(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.deleteCenter(r.int_centro_id))}),t.TgZ(1,"i",14),t._uU(2," loop "),t.qZA()()}}function U(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",12),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.detalles(i.int_centro_id))}),t._uU(2),t.qZA(),t.TgZ(3,"td",12),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.detalles(i.int_centro_id))}),t.TgZ(4,"div",13)(5,"i",14),t._uU(6," person "),t.qZA(),t.TgZ(7,"label"),t._uU(8),t.qZA()()(),t.TgZ(9,"td",12),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.detalles(i.int_centro_id))}),t._uU(10),t.qZA(),t.TgZ(11,"td",12),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.detalles(i.int_centro_id))}),t._uU(12),t.qZA(),t.YNc(13,M,2,1,"td",15),t.YNc(14,b,2,1,"td",15),t.YNc(15,A,4,1,"td",2),t.YNc(16,y,4,1,"td",2),t.TgZ(17,"td"),t.YNc(18,w,3,0,"button",16),t.YNc(19,q,3,0,"button",17),t.YNc(20,N,3,0,"button",18),t.qZA()()}if(2&n){const e=s.$implicit,o=s.index,r=t.oxw(2);t.xp6(2),t.Oqu(o+1),t.xp6(6),t.hij(" ",e.str_centro_nombre.toUpperCase()," "),t.xp6(2),t.Oqu(e.str_centro_tipo_nombre),t.xp6(2),t.hij(" ",e.str_centro_nombre_sede,""),t.xp6(1),t.Q6J("ngIf",null!=e.str_centro_nombre_dependencia),t.xp6(1),t.Q6J("ngIf",null===e.str_centro_nombre_dependencia),t.xp6(1),t.Q6J("ngIf","ACTIVO"===e.str_centro_estado),t.xp6(1),t.Q6J("ngIf","INACTIVO"===e.str_centro_estado),t.xp6(2),t.Q6J("ngIf",r.permisoEditar("centros")),t.xp6(1),t.Q6J("ngIf","ACTIVO"===e.str_centro_estado&&r.permisoEliminar("centros")),t.xp6(1),t.Q6J("ngIf","INACTIVO"===e.str_centro_estado&&r.permisoEliminar("centros"))}}function F(n,s){if(1&n&&(t.TgZ(0,"div")(1,"table",6)(2,"thead")(3,"tr",7)(4,"th",8)(5,"div",9),t._uU(6," # "),t.qZA()(),t.TgZ(7,"th",8)(8,"div",9),t._uU(9,"Nombre"),t.qZA()(),t.TgZ(10,"th",8)(11,"div",9),t._uU(12,"Tipo"),t.qZA()(),t.TgZ(13,"th",8)(14,"div",9),t._uU(15,"Sede"),t.qZA()(),t.TgZ(16,"th",8)(17,"div",9),t._uU(18,"Dependencia"),t.qZA()(),t.TgZ(19,"th",8)(20,"div",9),t._uU(21,"Estado"),t.qZA()(),t.YNc(22,Z,3,0,"th",10),t.qZA()(),t.TgZ(23,"tbody"),t.YNc(24,U,21,11,"tr",11),t.qZA()()()),2&n){const e=t.oxw();t.xp6(22),t.Q6J("ngIf",e.permisoEliminar("centros")||e.permisoEditar("centros")),t.xp6(2),t.Q6J("ngForOf",e.srvCentros.datosCentros)}}function O(n,s){1&n&&(t.TgZ(0,"div",25)(1,"div",26),t.O4$(),t.TgZ(2,"svg",27),t._UZ(3,"path",28),t.qZA(),t.kcU(),t.TgZ(4,"h5",29),t._uU(5,"Resultado sin datos"),t.qZA(),t.TgZ(6,"h6",30),t._uU(7,"No se encontraron elementos para esta lista."),t.qZA()()())}let P=(()=>{class n{constructor(e,o,r,i){this.srvCentros=e,this.srvModal=o,this.srvPaginacion=r,this.srvMenu=i,this.isLoading=!1,this.isData=!1,this.elementForm={form:"",title:"",special:!0},this.elementPagina={dataLength:0,metaData:0,currentPage:0},this.currentPage=1,this.mapFiltersToRequest={},this.destroy$=new g.x,this.options=["tipo_nombre","nombre_sede","estado"],this.searchResult=null,this.data="",this.parameter=""}ngOnInit(){this.pasarPagina(1)}getCentros(){c().fire({title:"Cargando Centros...",didOpen:()=>{c().showLoading(),this.isLoading=!0,this.isData=!0}}),this.srvCentros.getCenter(this.mapFiltersToRequest).pipe((0,_.R)(this.destroy$)).subscribe({next:e=>{e.body.length>0?(this.isData=!0,this.isLoading=!0,this.srvCentros.datosCentros=e.body,this.metadata=e.total):this.srvCentros.SelectIsCarga$.pipe((0,_.R)(this.destroy$)).subscribe({next:o=>{this.isLoading=o.isLoading,this.isData=o.isData}}),c().close(),this.dataPagina()},error:e=>{console.log("error ->",e)},complete:()=>{}})}dataPagina(){this.elementPagina.dataLength=this.srvCentros.datosCentros?this.srvCentros.datosCentros.length:0,this.elementPagina.metaData=this.metadata,this.elementPagina.currentPage=this.mapFiltersToRequest.page}deleteCenter(e){c().fire({title:"\xbfEst\xe1 seguro que desea modificar este Centro?",showDenyButton:!0,text:"Al deshabilitar un Centro, este no podra acceder al sistema. Este cambio puede ser revertido en cualquier momento",confirmButtonText:"Si, modificar",denyButtonText:"Cancelar"}).then(o=>{o.isConfirmed&&(c().fire({title:"Modificando Centro...",didOpen:()=>{c().showLoading()}}),this.srvCentros.deleteCenter(e).pipe((0,_.R)(this.destroy$)).subscribe({next:r=>{r.status?c().fire({title:"Estado modificado corectamente",icon:"success",showConfirmButton:!1,timer:3e3}):c().fire({title:"No se modifico el estado",icon:"error",showConfirmButton:!1,timer:3e3}),this.getCentros(),setTimeout(()=>{c().close()},3e3)},error:r=>{console.log("err",r)},complete:()=>{}}))})}pasarPagina(e){this.mapFiltersToRequest={size:10,page:e,parameter:"",data:0},console.log("mapFiltersToRequest",this.mapFiltersToRequest),this.getCentros()}modifyCenter(e,o,r){this.srvCentros.idModify=e,this.elementForm.form=r,this.elementForm.title=o,this.srvModal.setForm(this.elementForm),this.srvModal.openModal()}detalles(e){c().fire({title:"Cargando Centros...",didOpen:()=>{c().showLoading(),this.isLoading=!0,this.isData=!0}}),this.getDetalles(e),this.srvModal.openModal()}getDetalles(e){this.srvCentros.getDetalles(e).pipe((0,_.R)(this.destroy$)).subscribe({next:o=>{this.srvCentros.datosDetalles=o.body},error:o=>{console.log("error ->",o)},complete:()=>{c().close(),console.log("se completa"),this.elementForm.form="detallesCentro",this.elementForm.title="detalles",this.srvModal.setForm(this.elementForm)}})}handleSearch(e){this.searchResult=e,""===this.searchResult.data||null==this.searchResult.data?(this.parameter="",this.data="",this.pasarPagina(1)):(this.parameter="str_centro_"+this.searchResult.parameter,this.data=this.searchResult.data,this.mapFiltersToRequest={size:10,page:1,parameter:this.parameter,data:this.searchResult.data},this.getCentros())}permisoEditar(e){return this.srvMenu.permisos.find(o=>o.str_menu_path===e)?.bln_editar??!1}permisoEliminar(e){return this.srvMenu.permisos.find(o=>o.str_menu_path===e)?.bln_eliminar??!1}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.B),t.Y36(f.Z),t.Y36(v.H),t.Y36(u.h))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mostrar-centros"]],decls:6,vars:3,consts:[[3,"options","search"],[1,"tabla-cuerpo"],[4,"ngIf"],["class","containerNoData",4,"ngIf"],[1,"pagi"],[3,"nextPage"],[1,"table","table-striped","tabla-estilos"],[1,"encabezado"],[1,"th-head"],[1,"d-flex"],["class","th-head",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click"],[1,"content-td"],[1,"material-icons"],[3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-loop",3,"click",4,"ngIf"],[1,"estado"],[1,"activo"],[1,"inactivo"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-loop",3,"click"],[1,"containerNoData"],["_ngcontent-lne-c77","",1,"mx-auto",2,"margin-top","64px","margin-bottom","64px"],["_ngcontent-lne-c77","","xmlns","http://www.w3.org/2000/svg","height","32","width","32","viewBox","0 0 48 48"],["_ngcontent-lne-c77","","d","M38.7 40.85 26.65 28.8q-1.5 1.3-3.5 2.025-2 .725-4.25.725-5.4 0-9.15-3.75T6 18.75q0-5.3 3.75-9.05 3.75-3.75 9.1-3.75 5.3 0 9.025 3.75 3.725 3.75 3.725 9.05 0 2.15-.7 4.15-.7 2-2.1 3.75L40.95 38.7q.45.4.45 1.025 0 .625-.5 1.125-.45.45-1.1.45-.65 0-1.1-.45Zm-19.85-12.3q4.05 0 6.9-2.875Q28.6 22.8 28.6 18.75t-2.85-6.925Q22.9 8.95 18.85 8.95q-4.1 0-6.975 2.875T9 18.75q0 4.05 2.875 6.925t6.975 2.875Z"],["_ngcontent-lne-c77","",1,"mt-2"],["_ngcontent-lne-c77",""]],template:function(e,o){1&e&&(t.TgZ(0,"app-filter",0),t.NdJ("search",function(i){return o.handleSearch(i)}),t.qZA(),t.TgZ(1,"div",1),t.YNc(2,F,25,2,"div",2),t.YNc(3,O,8,0,"div",3),t.TgZ(4,"div",4)(5,"app-pagination",5),t.NdJ("nextPage",function(i){return o.pasarPagina(i)}),t.qZA()()()),2&e&&(t.Q6J("options",o.options),t.xp6(2),t.Q6J("ngIf",o.isLoading&&o.isData),t.xp6(1),t.Q6J("ngIf",!o.isLoading&&!o.isData))},dependencies:[d.sg,d.O5,x.Q,T.z],styles:[".tabla-estilos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer;border-top-width:.5px}"]}),n})();var I=a(9388);function J(n,s){1&n&&(t.TgZ(0,"div",9),t._UZ(1,"app-button",10),t.qZA()),2&n&&(t.xp6(1),t.Q6J("form","nuevoCentro")("title","Agregar Centro"))}const R=[{path:"",component:(()=>{class n{constructor(e){this.srvMenu=e}ngOnInit(){}permisoCrear(e){return this.srvMenu.permisos.find(o=>o.str_menu_path===e)?.bln_crear??!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.h))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-centros"]],decls:14,vars:1,consts:[[1,"father"],[1,"containerBody"],[1,"titleConfiguration"],[1,"titleButton"],[1,"title"],[2,"color","#B41A12"],[2,"color","rgb(160, 160, 160)","font-family","'Roboto', Arial, sans-serif","font-size","14px"],["class","buttonAgg",4,"ngIf"],[1,"showCenter"],[1,"buttonAgg"],[3,"form","title"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),t._uU(6,"Pantalla de "),t.TgZ(7,"span",5),t._uU(8," Centros "),t.qZA()(),t.TgZ(9,"span",6),t._uU(10," Listado de Centros "),t.qZA()(),t.YNc(11,J,2,2,"div",7),t.qZA(),t.TgZ(12,"div",8),t._UZ(13,"app-mostrar-centros"),t.qZA()()()()),2&e&&(t.xp6(11),t.Q6J("ngIf",o.permisoCrear("centros")))},dependencies:[d.O5,P,I.r],styles:[".father[_ngcontent-%COMP%]{width:auto;padding:2rem;min-width:250px;display:flex}.containerBody[_ngcontent-%COMP%]{width:100%;height:100%}.titleConfiguration[_ngcontent-%COMP%]{width:100%;height:10%}.titleConfiguration[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;font-family:Arial,Helvetica,sans-serif;font-weight:500;color:#0c0c0c}.buttonAgg[_ngcontent-%COMP%]{display:flex;gap:15px}.titleButton[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-content:center;margin-bottom:20px}.showCenter[_ngcontent-%COMP%]{height:880%}"]}),n})()}];let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(R),m.Bz]}),n})();var D=a(325),E=a(9258);let Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,$,D.O,E.K]}),n})()}}]);