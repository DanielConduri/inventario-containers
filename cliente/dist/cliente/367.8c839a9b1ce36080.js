"use strict";(self.webpackChunkcliente=self.webpackChunkcliente||[]).push([[367],{367:(k,m,a)=>{a.r(m),a.d(m,{CentrosModule:()=>R});var _=a(6895),h=a(8562),t=a(4650),g=a(8145),u=a(7579),p=a(2722),C=a(5226),l=a.n(C),f=a(2573),v=a(4359),x=a(8158),T=a(5131),Z=a(3194),b=a(7888);function M(o,r){1&o&&(t.TgZ(0,"th",8)(1,"div",9),t._uU(2,"Acciones"),t.qZA()())}function A(o,r){if(1&o){const s=t.EpF();t.TgZ(0,"td",12),t.NdJ("click",function(){t.CHM(s);const e=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.detalles(e.int_centro_id))}),t._uU(1),t.qZA()}if(2&o){const s=t.oxw().$implicit;t.xp6(1),t.hij(" ",s.str_centro_nombre_dependencia,"")}}function y(o,r){if(1&o){const s=t.EpF();t.TgZ(0,"td",12),t.NdJ("click",function(){t.CHM(s);const e=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.detalles(e.int_centro_id))}),t._uU(1),t.qZA()}if(2&o){const s=t.oxw().$implicit;t.xp6(1),t.hij(" ",s.str_centro_nombre_facultad," ")}}function w(o,r){if(1&o&&(t.TgZ(0,"td")(1,"div",20)(2,"div",21),t._uU(3),t.qZA()()()),2&o){const s=t.oxw().$implicit;t.xp6(3),t.hij(" ",s.str_centro_estado," ")}}function P(o,r){if(1&o&&(t.TgZ(0,"td")(1,"div",20)(2,"div",22),t._uU(3),t.qZA()()()),2&o){const s=t.oxw().$implicit;t.xp6(3),t.hij(" ",s.str_centro_estado," ")}}function q(o,r){if(1&o){const s=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(s);const e=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.modifyCenter(e.int_centro_id,"Editar Centros","editarCentros"))}),t.TgZ(1,"i",14),t._uU(2,"create"),t.qZA()()}}function F(o,r){if(1&o){const s=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(s);const e=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.deleteCenter(e.int_centro_id))}),t.TgZ(1,"i",14),t._uU(2," delete "),t.qZA()()}}function N(o,r){if(1&o){const s=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(s);const e=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.deleteCenter(e.int_centro_id))}),t.TgZ(1,"i",14),t._uU(2," loop "),t.qZA()()}}function U(o,r){if(1&o){const s=t.EpF();t.TgZ(0,"tr")(1,"td",12),t.NdJ("click",function(){const i=t.CHM(s).$implicit,c=t.oxw(2);return t.KtG(c.detalles(i.int_centro_id))}),t._uU(2),t.qZA(),t.TgZ(3,"td",12),t.NdJ("click",function(){const i=t.CHM(s).$implicit,c=t.oxw(2);return t.KtG(c.detalles(i.int_centro_id))}),t.TgZ(4,"div",13)(5,"i",14),t._uU(6," person "),t.qZA(),t.TgZ(7,"label"),t._uU(8),t.qZA()()(),t.TgZ(9,"td",12),t.NdJ("click",function(){const i=t.CHM(s).$implicit,c=t.oxw(2);return t.KtG(c.detalles(i.int_centro_id))}),t._uU(10),t.qZA(),t.TgZ(11,"td",12),t.NdJ("click",function(){const i=t.CHM(s).$implicit,c=t.oxw(2);return t.KtG(c.detalles(i.int_centro_id))}),t._uU(12),t.qZA(),t.YNc(13,A,2,1,"td",15),t.YNc(14,y,2,1,"td",15),t.YNc(15,w,4,1,"td",2),t.YNc(16,P,4,1,"td",2),t.TgZ(17,"td"),t.YNc(18,q,3,0,"button",16),t.YNc(19,F,3,0,"button",17),t.YNc(20,N,3,0,"button",18),t.TgZ(21,"button",19),t.NdJ("click",function(){const i=t.CHM(s).$implicit,c=t.oxw(2);return t.KtG(c.agregarHorario(i.int_centro_id,i.str_centro_nombre))}),t.TgZ(22,"i",14),t._uU(23," event "),t.qZA()()()()}if(2&o){const s=r.$implicit,n=r.index,e=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(6),t.hij(" ",s.str_centro_nombre," "),t.xp6(2),t.Oqu(s.str_centro_tipo_nombre),t.xp6(2),t.hij(" ",s.str_centro_nombre_sede,""),t.xp6(1),t.Q6J("ngIf",null!=s.str_centro_nombre_dependencia),t.xp6(1),t.Q6J("ngIf",null===s.str_centro_nombre_dependencia),t.xp6(1),t.Q6J("ngIf","ACTIVO"===s.str_centro_estado),t.xp6(1),t.Q6J("ngIf","INACTIVO"===s.str_centro_estado),t.xp6(2),t.Q6J("ngIf",e.permisoEditar("centros")),t.xp6(1),t.Q6J("ngIf","ACTIVO"===s.str_centro_estado&&e.permisoEliminar("centros")),t.xp6(1),t.Q6J("ngIf","INACTIVO"===s.str_centro_estado&&e.permisoEliminar("centros"))}}function O(o,r){if(1&o&&(t.TgZ(0,"div")(1,"table",6)(2,"thead")(3,"tr",7)(4,"th",8)(5,"div",9),t._uU(6," # "),t.qZA()(),t.TgZ(7,"th",8)(8,"div",9),t._uU(9,"Nombre"),t.qZA()(),t.TgZ(10,"th",8)(11,"div",9),t._uU(12,"Tipo"),t.qZA()(),t.TgZ(13,"th",8)(14,"div",9),t._uU(15,"Sede"),t.qZA()(),t.TgZ(16,"th",8)(17,"div",9),t._uU(18,"Dependencia"),t.qZA()(),t.TgZ(19,"th",8)(20,"div",9),t._uU(21,"Estado"),t.qZA()(),t.YNc(22,M,3,0,"th",10),t.qZA()(),t.TgZ(23,"tbody"),t.YNc(24,U,24,11,"tr",11),t.qZA()()()),2&o){const s=t.oxw();t.xp6(22),t.Q6J("ngIf",s.permisoEliminar("centros")||s.permisoEditar("centros")),t.xp6(2),t.Q6J("ngForOf",s.srvCentros.datosCentros)}}function I(o,r){1&o&&(t.TgZ(0,"div",25)(1,"div",26),t.O4$(),t.TgZ(2,"svg",27),t._UZ(3,"path",28),t.qZA(),t.kcU(),t.TgZ(4,"h5",29),t._uU(5,"Resultado sin datos"),t.qZA(),t.TgZ(6,"h6",30),t._uU(7,"No se encontraron elementos para esta lista."),t.qZA()()())}let J=(()=>{const r=class{constructor(n,e,i,c,d){this.srvCentros=n,this.srvModal=e,this.srvPaginacion=i,this.srvMenu=c,this.srvHorario=d,this.isLoading=!1,this.isData=!1,this.elementForm={form:"",title:"",special:!0},this.elementPagina={dataLength:0,metaData:0,currentPage:0},this.currentPage=1,this.mapFiltersToRequest={},this.destroy$=new u.x,this.options=["nombre","nombre_sede","estado"],this.searchResult=null,this.data="",this.parameter=""}ngOnInit(){this.pasarPagina(1)}getCentros(){l().fire({title:"Cargando Centros...",didOpen:()=>{l().showLoading(),this.isLoading=!0,this.isData=!0}}),this.srvCentros.getCenter(this.mapFiltersToRequest).pipe((0,p.R)(this.destroy$)).subscribe({next:n=>{console.log("center ->",n),n.status?(this.isData=!0,this.isLoading=!0,this.srvCentros.datosCentros=n.body,this.metadata=n.total):this.srvCentros.SelectIsCarga$.pipe((0,p.R)(this.destroy$)).subscribe({next:e=>{this.isLoading=e.isLoading,this.isData=e.isData}}),l().close(),this.dataPagina()},error:n=>{console.log("error ->",n)},complete:()=>{}})}dataPagina(){this.elementPagina.dataLength=this.srvCentros.datosCentros?this.srvCentros.datosCentros.length:0,this.elementPagina.metaData=this.metadata,this.elementPagina.currentPage=this.mapFiltersToRequest.page,this.srvPaginacion.setPagination(this.elementPagina)}deleteCenter(n){l().fire({title:"\xbfEst\xe1 seguro que desea modificar este Centro?",showDenyButton:!0,text:"Al deshabilitar un Centro, este no podra acceder al sistema. Este cambio puede ser revertido en cualquier momento",confirmButtonText:"Si, modificar",denyButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(l().fire({title:"Modificando Centro...",didOpen:()=>{l().showLoading()}}),console.log("antes de la peticion"),this.srvCentros.deleteCenter(n).pipe((0,p.R)(this.destroy$)).subscribe({next:i=>{console.log("va por aqui"),i.status?l().fire({title:"Estado modificado corectamente",icon:"success",showConfirmButton:!1,timer:3e3}):l().fire({title:"No se modifico el estado",icon:"error",showConfirmButton:!1,timer:3e3}),this.getCentros(),setTimeout(()=>{l().close()},3e3)},error:i=>{console.log("err",i)},complete:()=>{}}))})}pasarPagina(n){this.mapFiltersToRequest={size:10,page:n,parameter:this.parameter,data:0},this.getCentros()}modifyCenter(n,e,i){this.srvCentros.idModify=n,this.elementForm.form=i,this.elementForm.title=e,this.srvModal.setForm(this.elementForm),this.srvModal.openModal()}detalles(n){l().fire({title:"Cargando Centros...",didOpen:()=>{l().showLoading(),this.isLoading=!0,this.isData=!0}}),this.getDetalles(n),this.srvModal.openModal()}getDetalles(n){this.srvCentros.getDetalles(n).pipe((0,p.R)(this.destroy$)).subscribe({next:e=>{this.srvCentros.datosDetalles=e.body},error:e=>{console.log("error ->",e)},complete:()=>{l().close(),this.elementForm.form="detallesCentro",this.elementForm.title="detalles",this.srvModal.setForm(this.elementForm)}})}handleSearch(n){this.searchResult=n,""===this.searchResult.data||null==this.searchResult.data?(this.parameter="",this.data="",this.pasarPagina(1)):(console.log("aqui entra y no se pone falso",n),this.parameter="str_centro_"+this.searchResult.parameter,this.data=this.searchResult.data,this.mapFiltersToRequest={size:10,page:1,parameter:this.parameter,data:this.searchResult.data},this.getCentros())}permisoEditar(n){return this.srvMenu.permisos.find(e=>e.str_menu_path===n)?.bln_editar??!1}permisoEliminar(n){return this.srvMenu.permisos.find(e=>e.str_menu_path===n)?.bln_eliminar??!1}agregarHorario(n,e){this.srvCentros.setCentroSeleccionado({id_centro:n,nombre_centro:e}),this.srvHorario.getHorarios(n),this.srvCentros.idModify=n,this.elementForm.form="horarioCentro",this.elementForm.title="Agregar Horario al Centro",this.srvModal.setForm(this.elementForm),this.srvModal.openModal()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}};let o=r;return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.B),t.Y36(v.Z),t.Y36(x.H),t.Y36(g.h),t.Y36(T.W))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-mostrar-centros"]],decls:6,vars:3,consts:[[3,"options","search"],[1,"tabla-cuerpo"],[4,"ngIf"],["class","containerNoData",4,"ngIf"],[1,"pagi"],[3,"nextPage"],[1,"table","table-striped","tabla-estilos"],[1,"encabezado"],[1,"th-head"],[1,"d-flex"],["class","th-head",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click"],[1,"content-td"],[1,"material-icons"],[3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-loop",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"estado"],[1,"activo"],[1,"inactivo"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-loop",3,"click"],[1,"containerNoData"],["_ngcontent-lne-c77","",1,"mx-auto",2,"margin-top","64px","margin-bottom","64px"],["_ngcontent-lne-c77","","xmlns","http://www.w3.org/2000/svg","height","32","width","32","viewBox","0 0 48 48"],["_ngcontent-lne-c77","","d","M38.7 40.85 26.65 28.8q-1.5 1.3-3.5 2.025-2 .725-4.25.725-5.4 0-9.15-3.75T6 18.75q0-5.3 3.75-9.05 3.75-3.75 9.1-3.75 5.3 0 9.025 3.75 3.725 3.75 3.725 9.05 0 2.15-.7 4.15-.7 2-2.1 3.75L40.95 38.7q.45.4.45 1.025 0 .625-.5 1.125-.45.45-1.1.45-.65 0-1.1-.45Zm-19.85-12.3q4.05 0 6.9-2.875Q28.6 22.8 28.6 18.75t-2.85-6.925Q22.9 8.95 18.85 8.95q-4.1 0-6.975 2.875T9 18.75q0 4.05 2.875 6.925t6.975 2.875Z"],["_ngcontent-lne-c77","",1,"mt-2"],["_ngcontent-lne-c77",""]],template:function(e,i){1&e&&(t.TgZ(0,"app-filter",0),t.NdJ("search",function(d){return i.handleSearch(d)}),t.qZA(),t.TgZ(1,"div",1),t.YNc(2,O,25,2,"div",2),t.YNc(3,I,8,0,"div",3),t.TgZ(4,"div",4)(5,"app-pagination",5),t.NdJ("nextPage",function(d){return i.pasarPagina(d)}),t.qZA()()()),2&e&&(t.Q6J("options",i.options),t.xp6(2),t.Q6J("ngIf",i.isLoading&&i.isData),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&!i.isData))},dependencies:[_.sg,_.O5,Z.Q,b.z],styles:[".tabla-estilos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer;border-top-width:.5px}"]}),o})();var $=a(1354);function D(o,r){1&o&&(t.TgZ(0,"div",9),t._UZ(1,"app-button",10),t.qZA()),2&o&&(t.xp6(1),t.Q6J("form","nuevoCentro")("title","Agregar Centro"))}const E=[{path:"",component:(()=>{const r=class{constructor(n){this.srvMenu=n}ngOnInit(){}permisoCrear(n){return this.srvMenu.permisos.find(e=>e.str_menu_path===n)?.bln_crear??!1}};let o=r;return r.\u0275fac=function(e){return new(e||r)(t.Y36(g.h))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-centros"]],decls:14,vars:1,consts:[[1,"father"],[1,"containerBody"],[1,"titleConfiguration"],[1,"titleButton"],[1,"title"],[2,"color","#B41A12"],[2,"color","rgb(160, 160, 160)","font-family","'Roboto', Arial, sans-serif","font-size","14px"],["class","buttonAgg",4,"ngIf"],[1,"showCenter"],[1,"buttonAgg"],[3,"form","title"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),t._uU(6,"Pantalla de "),t.TgZ(7,"span",5),t._uU(8," Centros "),t.qZA()(),t.TgZ(9,"span",6),t._uU(10," Listado de Centros "),t.qZA()(),t.YNc(11,D,2,2,"div",7),t.qZA(),t.TgZ(12,"div",8),t._UZ(13,"app-mostrar-centros"),t.qZA()()()()),2&e&&(t.xp6(11),t.Q6J("ngIf",i.permisoCrear("centros")))},dependencies:[_.O5,J,$.r],styles:[".father[_ngcontent-%COMP%]{width:auto;padding:2rem;min-width:250px;display:flex}.containerBody[_ngcontent-%COMP%]{width:100%;height:100%}.titleConfiguration[_ngcontent-%COMP%]{width:100%;height:10%}.titleConfiguration[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;font-family:Arial,Helvetica,sans-serif;font-weight:500;color:#0c0c0c}.buttonAgg[_ngcontent-%COMP%]{display:flex;gap:15px}.titleButton[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-content:center;margin-bottom:20px}.showCenter[_ngcontent-%COMP%]{height:880%}"]}),o})()}];let H=(()=>{const r=class{};let o=r;return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[h.Bz.forChild(E),h.Bz]}),o})();var Y=a(6809),Q=a(5642);let R=(()=>{const r=class{};let o=r;return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[_.ez,H,Y.O,Q.K]}),o})()}}]);